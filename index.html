
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>AIJOE ‚Äì Cheerful Voice</title>
<link rel="manifest" href="manifest.json"/>
<meta name="theme-color" content="#0d1117"/>
<style>
 body{margin:0;font-family:Arial;background:#0d1117;color:#fff;text-align:center;padding:20px}
 h1{font-size:2em;margin-bottom:10px}
 select,button{background:#1e90ff;color:#fff;border:none;padding:10px 14px;margin:8px;border-radius:10px;font-size:1em;cursor:pointer}
 .log{margin-top:12px;color:#a8d1ff}
</style>
</head>
<body>
<h1>üêæ AIJOE</h1>
<label for="voiceSel">Choose Voice:</label>
<select id="voiceSel"></select><br/>
<button id="micBtn">üé§ Talk to Joey</button>
<div id="log" class="log">Allow mic, choose a voice, say something.</div>

<script>
const synth = window.speechSynthesis;
const voiceSel=document.getElementById("voiceSel");
function loadVoices(){
  const voices=synth.getVoices().filter(v=>v.lang.startsWith('en'));
  voiceSel.innerHTML='';
  voices.forEach((v,i)=>{
     const opt=document.createElement('option');
     opt.value=v.name;
     opt.textContent=v.name;
     if(/male/i.test(v.name) || v.name.includes('Google US English')){
        opt.selected=true;
     }
     voiceSel.appendChild(opt);
  });
}
loadVoices();
synth.onvoiceschanged=loadVoices;

function speak(t){
  const utter=new SpeechSynthesisUtterance(t);
  const chosen=Array.from(synth.getVoices()).find(v=>v.name===voiceSel.value);
  utter.voice=chosen||null;
  utter.pitch=1.15; // cheerful
  utter.rate=1.05;
  utter.volume=1;
  synth.speak(utter);
}

function supportsRec(){return !!(window.SpeechRecognition||window.webkitSpeechRecognition);}

document.getElementById('micBtn').onclick=()=>{
 if(!supportsRec()){document.getElementById('log').textContent="SpeechRecognition not supported.";speak("Sorry, voice input not supported on this device.");return;}
 const Rec=window.SpeechRecognition||window.webkitSpeechRecognition;
 const rec=new Rec();
 rec.lang='en-US';
 rec.start();
 document.getElementById('log').textContent='üéôÔ∏è Listening...';
 rec.onresult=e=>{
   const text=e.results[0][0].transcript;
   document.getElementById('log').textContent='You said: '+text;
   speak("You said "+text);
 };
 rec.onerror=e=>{
   document.getElementById('log').textContent='Error: '+e.error;
   speak("Sorry, I didn't catch that.");
 };
};
</script>
</body>
</html>
